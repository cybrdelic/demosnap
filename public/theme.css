/* Perimeter HUD System - Light Default with Truth-Based Telemetry */
:root {
  /* Light theme - calm, truthful baseline */
  --color-bg: #fafbfc;
  --color-bg-alt: #f6f8fa;
  --color-surface: #ffffff;
  --color-border: #d1d9e0;
  --color-border-strong: #8c959f;
  --color-text: #1c2128;
  --color-text-dim: #656d76;
  --color-text-faint: #8c959f;
  --color-accent: #0969da;
  --color-accent-hover: #0550ae;
  --color-warn: #bf8700;
  --color-danger: #cf222e;
  --focus-ring: #0969da;
  /* HUD-specific tokens */
  --hud-bg: rgba(255,255,255,.92);
  --hud-border: #d1d9e0;
  --hud-text: #656d76;
  --hud-label: #8c959f;
  --hud-accent: #0969da;
  /* Grid & spacing (8px base) */
  --baseline: 8px;
  --hud-corner-pad: 24px;
  --hud-corner-gap: 16px;
  /* Motion (respects prefers-reduced-motion) */
  --transition-instant: 0ms;
  --transition-micro: 120ms cubic-bezier(.2,0,.38,1);
  /* Typography scales */
  --font-mono: ui-monospace, 'SF Mono', Consolas, monospace;
  --hud-size: 11px;
  --hud-weight: 400;
  --hud-tracking: 0.14em;
  --label-weight: 300;
}

/* Dark theme - same system, different tokens */
[data-theme='dark'] {
  --color-bg: #0d1117;
  --color-bg-alt: #161b22;
  --color-surface: #21262d;
  --color-border: #30363d;
  --color-border-strong: #484f58;
  --color-text: #e6edf3;
  --color-text-dim: #7d8590;
  --color-text-faint: #656d76;
  --color-accent: #2f81f7;
  --color-accent-hover: #1f6feb;
  --color-warn: #d29922;
  --color-danger: #f85149;
  --focus-ring: #2f81f7;
  --hud-bg: rgba(13,17,23,.92);
  --hud-border: #30363d;
  --hud-text: #7d8590;
  --hud-label: #656d76;
  --hud-accent: #2f81f7;
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  :root {
    --transition-micro: 0ms;
  }
}

/* Base layout - no panels, pure content flow */
html, body {
  margin:0; padding:0;
  font-family: system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
  background: var(--color-bg);
  color: var(--color-text);
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
}

/* Perimeter HUD corners - pixel-snapped, stable */
.hud-perimeter { position: fixed; inset: 0; pointer-events: none; z-index: 200; }

.hud-corner {
  position: absolute;
  display: flex;
  flex-direction: column;
  gap: calc(var(--baseline) * 1.5);
  padding: var(--hud-corner-pad);
  pointer-events: auto;
  font: var(--hud-weight) var(--hud-size)/1.2 var(--font-mono);
  letter-spacing: var(--hud-tracking);
  text-transform: uppercase;
  color: var(--hud-text);
}

.hud-corner.tl { top: 0; left: 0; }
.hud-corner.tr { top: 0; right: 0; }
.hud-corner.bl { bottom: 0; left: 0; }
.hud-corner.br { bottom: 0; right: 0; }

.hud-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: calc(var(--baseline) * 2);
  min-height: calc(var(--baseline) * 2);
}

.hud-label {
  font-weight: var(--label-weight);
  color: var(--hud-label);
  opacity: 0.8;
}

.hud-value {
  font-weight: 500;
  color: var(--hud-text);
}

.hud-actions {
  display: flex;
  gap: calc(var(--baseline) * 1);
}

.hud-btn {
  background: transparent;
  border: none;
  color: var(--hud-text);
  padding: calc(var(--baseline) * 1) calc(var(--baseline) * 1.5);
  font: 500 var(--hud-size)/1 var(--font-mono);
  letter-spacing: var(--hud-tracking);
  text-transform: uppercase;
  cursor: pointer;
  transition: color var(--transition-micro);
}

.hud-btn:hover {
  color: var(--hud-accent);
}

.hud-btn:focus-visible {
  outline: 2px solid var(--focus-ring);
  outline-offset: 1px;
}

/* Content area - flows under HUD */
.content-flow {
  min-height: 100vh;
  padding: calc(var(--hud-corner-pad) * 2 + var(--baseline) * 8) var(--hud-corner-pad) calc(var(--hud-corner-pad) * 2);
  max-width: 1200px;
  margin: 0 auto;
}

/* Form elements - flat, truthful */
.form-section {
  margin: calc(var(--baseline) * 6) 0;
}

.form-row {
  display: flex;
  gap: calc(var(--baseline) * 3);
  margin: calc(var(--baseline) * 3) 0;
  align-items: flex-end;
}

.form-field {
  flex: 1;
  min-width: 200px;
}

.form-label {
  display: block;
  font: var(--label-weight) var(--hud-size)/1.2 var(--font-mono);
  letter-spacing: var(--hud-tracking);
  text-transform: uppercase;
  color: var(--hud-label);
  margin-bottom: calc(var(--baseline) * 1);
}

.form-input {
  width: 100%;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  color: var(--color-text);
  padding: calc(var(--baseline) * 2) calc(var(--baseline) * 2);
  font: 400 14px/1.4 system-ui,sans-serif;
  transition: border-color var(--transition-micro);
}

.form-input:focus {
  outline: 2px solid var(--focus-ring);
  outline-offset: 1px;
  border-color: var(--color-border-strong);
}

.form-actions {
  display: flex;
  gap: calc(var(--baseline) * 2);
  margin: calc(var(--baseline) * 4) 0;
  align-items: center;
  flex-wrap: wrap;
}

.btn {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  color: var(--color-text-dim);
  padding: calc(var(--baseline) * 2) calc(var(--baseline) * 3);
  font: 500 var(--hud-size)/1 var(--font-mono);
  letter-spacing: var(--hud-tracking);
  text-transform: uppercase;
  cursor: pointer;
  transition: all var(--transition-micro);
}

.btn:hover {
  border-color: var(--color-border-strong);
  color: var(--color-text);
}

.btn-primary {
  background: var(--color-accent);
  border-color: var(--color-accent);
  color: white;
}

.btn-primary:hover {
  background: var(--color-accent-hover);
  border-color: var(--color-accent-hover);
}

/* Action builder - visual timeline composition */
.action-builder {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: calc(var(--baseline) * 6);
  margin: calc(var(--baseline) * 4) 0;
}

.action-discovery {
  border: 1px solid var(--color-border);
  min-height: 400px;
  display: flex;
  flex-direction: column;
}

.discovery-header {
  padding: calc(var(--baseline) * 2);
  border-bottom: 1px solid var(--color-border);
  font: 500 var(--hud-size)/1 var(--font-mono);
  letter-spacing: var(--hud-tracking);
  text-transform: uppercase;
  color: var(--color-text-dim);
}

.discovery-empty {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--color-text-faint);
  font: 400 14px/1.4 system-ui,sans-serif;
}

.action-candidates {
  flex: 1;
  overflow-y: auto;
}

.action-item {
  display: flex;
  align-items: center;
  gap: calc(var(--baseline) * 2);
  padding: calc(var(--baseline) * 2);
  border-bottom: 1px solid var(--color-border);
  cursor: pointer;
  transition: background-color var(--transition-micro);
}

.action-item:hover {
  background: var(--color-bg-alt);
}

.action-item.selected {
  background: var(--color-accent);
  color: white;
}

.action-type {
  font: 600 var(--hud-size)/1 var(--font-mono);
  letter-spacing: var(--hud-tracking);
  text-transform: uppercase;
  color: var(--color-accent);
  min-width: 60px;
}

.action-item.selected .action-type {
  color: white;
}

.action-label {
  flex: 1;
  font: 400 14px/1.3 system-ui,sans-serif;
  color: var(--color-text);
}

.action-score {
  font: 500 var(--hud-size)/1 var(--font-mono);
  color: var(--color-text-dim);
  min-width: 40px;
  text-align: right;
}

.timeline-builder {
  border: 1px solid var(--color-border);
  min-height: 400px;
  display: flex;
  flex-direction: column;
}

.timeline-header {
  padding: calc(var(--baseline) * 2);
  border-bottom: 1px solid var(--color-border);
  font: 500 var(--hud-size)/1 var(--font-mono);
  letter-spacing: var(--hud-tracking);
  text-transform: uppercase;
  color: var(--color-text-dim);
  margin: 0;
}

.timeline-empty {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--color-text-faint);
  font: 400 14px/1.4 system-ui,sans-serif;
}

.timeline-actions {
  flex: 1;
  overflow-y: auto;
}

.timeline-item {
  display: flex;
  align-items: center;
  gap: calc(var(--baseline) * 2);
  padding: calc(var(--baseline) * 2);
  border-bottom: 1px solid var(--color-border);
}

.timeline-index {
  font: 600 var(--hud-size)/1 var(--font-mono);
  color: var(--color-text-dim);
  min-width: 24px;
}

.timeline-controls {
  padding: calc(var(--baseline) * 2);
  border-top: 1px solid var(--color-border);
  display: flex;
  gap: calc(var(--baseline) * 2);
}

.btn-small {
  padding: calc(var(--baseline) * 1) calc(var(--baseline) * 2);
  font-size: 10px;
}

/* YAML Preview */
.yaml-preview-wrapper { margin-top:12px; }
.yaml-preview-bar { display:flex; justify-content:space-between; align-items:center; margin-bottom:4px; }
.yaml-preview-title { font:500 12px system-ui; letter-spacing:.05em; text-transform:uppercase; color:var(--hud-label); }
#yamlPreview { max-height:240px; overflow:auto; font:12px/1.4 var(--font-mono); background:var(--color-bg-alt); padding:8px; border:1px solid var(--color-border); border-radius:4px; }

@media (max-width: 1000px) {
  .action-builder {
    grid-template-columns: 1fr;
    gap: calc(var(--baseline) * 4);
  }
}

/* Content sections with semantic tracking */
.content-section {
  margin: calc(var(--baseline) * 10) 0;
  scroll-margin-top: calc(var(--baseline) * 12);
}

.section-header {
  font: 600 24px/1.2 system-ui,sans-serif;
  color: var(--color-text);
  margin: 0 0 calc(var(--baseline) * 3);
}

/* Status indicators - truthful only */
.status-dot {
  display: inline-block;
  width: calc(var(--baseline) * 1);
  height: calc(var(--baseline) * 1);
  border-radius: 50%;
  background: var(--color-border);
}

.status-dot.active { background: var(--color-accent); }
.status-dot.warn { background: var(--color-warn); }
.status-dot.danger { background: var(--color-danger); }

/* Progress hairline (bottom edge) */
.progress-hairline {
  position: fixed;
  bottom: 0;
  left: 0;
  height: 1px;
  background: var(--hud-accent);
  z-index: 150;
  transition: width var(--transition-micro);
}

/* Help overlay - terse, keyboard-first */
.help-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.8);
  z-index: 300;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  pointer-events: none;
  transition: opacity var(--transition-micro);
}

.help-overlay.open {
  opacity: 1;
  pointer-events: auto;
}

.help-content {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  padding: calc(var(--baseline) * 6);
  max-width: 600px;
  font: 400 14px/1.5 system-ui,sans-serif;
}

.help-shortcuts {
  display: grid;
  grid-template-columns: auto 1fr;
  gap: calc(var(--baseline) * 2) calc(var(--baseline) * 4);
  margin: calc(var(--baseline) * 4) 0;
}

.key {
  display: inline-block;
  background: var(--color-bg-alt);
  border: 1px solid var(--color-border);
  padding: calc(var(--baseline) * 0.5) calc(var(--baseline) * 1);
  font: 500 var(--hud-size)/1 var(--font-mono);
  text-transform: uppercase;
}

/* Mobile condensation - corners become 1-line belts */
@media (max-width: 768px) {
  .hud-corner {
    padding: calc(var(--baseline) * 2);
    gap: calc(var(--baseline) * 1);
  }

  .hud-corner.bl,
  .hud-corner.br {
    display: none; /* Move to progress hairline and help panel */
  }

  .content-flow {
    padding: calc(var(--baseline) * 8) calc(var(--baseline) * 2) calc(var(--baseline) * 4);
  }

  .form-row {
    flex-direction: column;
    gap: calc(var(--baseline) * 2);
  }
}

/* Utility classes to avoid inline styles */
.mt-3 { margin-top: calc(var(--baseline) * 3); }
.mt-4 { margin-top: calc(var(--baseline) * 4); }
.status-inline { color: var(--hud-text); font: 400 var(--hud-size)/1.2 var(--font-mono); letter-spacing: var(--hud-tracking); }
.preview-header { font: 500 16px/1.2 var(--font-mono); text-transform: uppercase; letter-spacing: 0.1em; color: var(--hud-label); }
.preview-area { min-height: 200px; background: var(--color-bg-alt); border: 1px solid var(--color-border); display: flex; align-items: center; justify-content: center; color: var(--color-text-dim); }
.progress-initial { width: 0%; }

body { min-height:100vh; }

h1,h2,h3,h4 { margin:0; font-weight:600; letter-spacing:.02em; }
p { line-height:1.5; }
a { color: var(--color-accent); text-decoration:none; }
a:hover { text-decoration:underline; }

/* Buttons */
button { cursor:pointer; font:600 .62rem/1 system-ui,sans-serif; letter-spacing:.16em; text-transform:uppercase; border-radius: var(--radius-sm); border:1px solid var(--color-border); background: var(--color-surface); color: var(--color-text-dim); padding:.55rem .8rem; transition: var(--transition); }
button:hover:not(:disabled) { background: var(--color-surface-hi); color: var(--color-text); border-color: var(--color-border-strong); }
button:active:not(:disabled) { background: var(--color-bg-alt); }
button:disabled { opacity:.45; cursor:default; }
button.primary { background: var(--color-accent); border-color: var(--color-accent); color:#fff; }
button.primary:hover { background: var(--color-accent-hover); }
button.outline { background:transparent; color:var(--color-text-dim); }
button.danger { background:#c52828; border-color:#b11f1f; }
button.danger:hover { background:#b42121; }

/* Inputs */
input[type=text], textarea { width:100%; background: var(--color-surface); border:1px solid var(--color-border); color:var(--color-text); border-radius: var(--radius-sm); padding:.55rem .65rem; font:500 .75rem/1.25 system-ui,sans-serif; letter-spacing:.02em; resize:vertical; }
input[type=text]:focus, textarea:focus { outline:2px solid var(--focus-ring); outline-offset:1px; }
textarea { font-family: var(--font-mono); min-height:220px; }
label { display:block; font:600 .54rem/1.3 var(--font-mono); letter-spacing:.18em; text-transform:uppercase; margin:0 0 4px; color:var(--color-text-dim); }

/* Panels */
.panel { background: var(--color-bg-alt); border:1px solid var(--color-border); border-radius: var(--radius-md); padding:1.1rem 1.25rem 1.3rem; box-shadow: var(--shadow-sm); }
.panel-header { font-size:.62rem; letter-spacing:.16em; font-weight:700; opacity:.62; margin:0 0 .75rem; }

/* Tables */
table { width:100%; border-collapse:collapse; font-size:.58rem; }
th, td { padding:.4rem .5rem; text-align:left; border-bottom:1px solid var(--color-border-soft); }
th { font-weight:600; letter-spacing:.1em; font-size:.55rem; opacity:.65; }
tbody tr:hover { background: var(--color-bg-alt); }

/* Tabs */
.tabs { display:flex; gap:.35rem; margin:.4rem 0 .9rem; }
.tabs button { flex:1; background: var(--color-surface); border:1px solid var(--color-border); border-radius: var(--radius-sm); padding:.48rem .55rem; font-size:.55rem; letter-spacing:.14em; font-weight:600; color:var(--color-text-faint); }
.tabs button.active { background: var(--color-accent-fade); color:var(--color-text); border-color: var(--color-border-strong); }

/* Utility */
.row { display:flex; gap:.75rem; }
.row-end { align-items:flex-end; gap:.6rem; flex-wrap:wrap; }
.grow { flex:1; }
.hidden { display:none !important; }
.scroll-box { max-height:340px; overflow:auto; border:1px solid var(--color-border); border-radius: var(--radius-sm); background:var(--color-surface); }
.scroll-box.sm { max-height:300px; }
.inline-actions { display:flex; gap:.5rem; flex-wrap:wrap; }
.pill { background: var(--color-bg-alt); padding:.25rem .6rem; border-radius:999px; font:600 .55rem/1 var(--font-mono); letter-spacing:.08em; color:var(--color-text-dim); }
code.inline { background: var(--color-surface); padding:.18rem .4rem; border-radius: var(--radius-sm); font-size:.55rem; font-family: var(--font-mono); }
#status { min-height:1.1rem; font-size:.6rem; letter-spacing:.1em; color:var(--color-text-dim); }
.jobs-grid { display:grid; gap:1rem; grid-template-columns:repeat(auto-fill,minmax(240px,1fr)); }
.job { background: var(--color-bg-alt); border:1px solid var(--color-border); border-radius: var(--radius-md); padding:.6rem .65rem .75rem; display:flex; flex-direction:column; gap:.45rem; }
.job img { width:100%; aspect-ratio:16/9; object-fit:cover; border:1px solid var(--color-border); border-radius: var(--radius-sm); background:#000; }
.badge-sm { background: var(--color-bg-alt); border:1px solid var(--color-border); padding:.2rem .45rem; border-radius: var(--radius-sm); font:600 .5rem/1 var(--font-mono); letter-spacing:.14em; color:var(--color-text-dim); }

footer { font-size:.55rem; opacity:.5; margin-top:2.2rem; text-align:center; }

/* Header & Layout */
header { padding:.8rem 1.2rem; font:600 .8rem/1 system-ui,sans-serif; letter-spacing:.08em; position:sticky; top:0; z-index:40; background:rgba(24,34,45,.85); -webkit-backdrop-filter:blur(8px); backdrop-filter:blur(8px); border-bottom:1px solid var(--color-border); display:flex; align-items:center; gap:.9rem; }
main { padding:1.2rem 1.4rem 3rem; margin:0 auto; max-width:1400px; display:grid; grid-template-columns:380px 1fr; gap:1.4rem; align-items:start; }
.badge { font:600 .5rem/1 var(--font-mono); letter-spacing:.14em; background:var(--color-bg-alt); border:1px solid var(--color-border); padding:.25rem .55rem; border-radius:999px; color:var(--color-text-dim); }

/* Preview (YAML cam) */
#preview3dWrap { margin-top:.65rem; border:1px solid var(--color-border); border-radius: var(--radius-sm); background: var(--color-surface); padding:.55rem .6rem .7rem; position:relative; }
#preview3d { width:100%; aspect-ratio:16/9; background:#0a131b; border:1px solid var(--color-border-soft); border-radius: var(--radius-sm); position:relative; overflow:hidden; }
#preview3d canvas { width:100%!important; height:100%!important; display:block; border-radius:inherit; }
#preview3dStatus { position:absolute; top:6px; left:10px; font:600 10px/1 var(--font-mono); letter-spacing:.14em; background:rgba(30,40,52,.6); padding:.25rem .45rem; border:1px solid var(--color-border); border-radius: var(--radius-sm); color:var(--color-text-dim); pointer-events:none; }
.preview-bar { display:flex; align-items:center; justify-content:space-between; gap:.6rem; margin-bottom:.45rem; }
.preview-bar-title { font:600 .55rem/1 var(--font-mono); letter-spacing:.16em; opacity:.6; }
.preview-bar-actions { display:flex; gap:.4rem; }
.btn-tight { padding:.4rem .65rem; font-size:.55rem; }
.btn-holo { background:transparent; border:1px solid var(--color-border); color:var(--color-text-faint); }
.btn-holo:hover { background:var(--color-surface-hi); color:var(--color-text); }

/* Old minimal HUD removed - using new perimeter system */

@media (max-width:1200px){ main { grid-template-columns:1fr; } }

/* Live Preview */
.live-preview { margin-top:1rem; }
.live-preview-title { margin:.15rem 0 .5rem; font:700 .55rem/1 var(--font-mono); letter-spacing:.16em; opacity:.6; }
.live-preview-body { border:1px solid var(--color-border); border-radius: var(--radius-sm); padding:.6rem .7rem; background: var(--color-surface); min-height:120px; display:flex; align-items:center; justify-content:center; font-size:.55rem; letter-spacing:.08em; opacity:.85; }

/* Utilities */
.mt-xl { margin-top:4rem; }
.max-w-sm { max-width:460px; }
.mt-sm { margin-top:.8rem; }

/* Drawer */
#drawer { position:fixed; top:0; right:0; width:380px; max-width:100%; height:100%; background: var(--color-bg); border-left:1px solid var(--color-border); box-shadow:-4px 0 32px -12px rgba(0,0,0,.5); transform:translateX(100%); transition: var(--transition); display:flex; flex-direction:column; z-index:140; }
#drawer.open { transform:translateX(0); }
#drawer header { padding:.75rem .85rem; font:700 .6rem/1 var(--font-mono); letter-spacing:.14em; background: var(--color-bg-alt); border-bottom:1px solid var(--color-border); }
#drawerLog { flex:1; overflow:auto; font:500 .58rem/1.3 var(--font-mono); padding:.6rem .75rem 2rem; }
#toggleDrawer { position:fixed; top:.85rem; right:.85rem; z-index:150; }

/* Minimal compositor override tokens can reuse these variables */
.minimal { font-family: var(--font-mono); font-size:.55rem; letter-spacing:.16em; }

/* Simple fade in */
.fade-in { animation:fade .5s ease forwards; opacity:0; }
@keyframes fade { to { opacity:1; } }

/* Scrollbars (webkit) */
*::-webkit-scrollbar { width:10px; height:10px; }
*::-webkit-scrollbar-track { background: var(--color-bg); }
*::-webkit-scrollbar-thumb { background: #233140; border-radius:10px; border:2px solid var(--color-bg); }
*::-webkit-scrollbar-thumb:hover { background:#2c3d4f; }

/* Responsive adjustments */
@media (max-width:1200px){ main { grid-template-columns:1fr; } }

/* =============================
   VIEWPORT FRAME (Perimeter HUD)
   ============================= */
:root {
  --frame-gap: 28px;
  --frame-gap-sm: 18px;
  --frame-radius: 10px;
  --frame-pad-y: 10px;
  --frame-pad-x: 14px;
  --frame-fg: var(--color-text-dim);
  --frame-fg-strong: var(--color-text);
  --frame-accent: var(--color-accent);
  --frame-keyline: rgba(255,255,255,.08);
  --frame-bg: rgba(8,12,16,.55);
  --frame-blur: 10px;
}

.viewport-frame { pointer-events:none; }
.frame-corner { position:fixed; z-index:150; max-width:280px; display:flex; flex-direction:column; gap:6px; font-family: var(--font-mono); font-weight:600; font-size:10px; letter-spacing:.18em; text-transform:uppercase; line-height:1.25; color:var(--frame-fg); padding:var(--frame-pad-y) var(--frame-pad-x); -webkit-backdrop-filter:blur(var(--frame-blur)); backdrop-filter:blur(var(--frame-blur)); background:var(--frame-bg); border:1px solid var(--frame-keyline); border-radius:var(--frame-radius); box-shadow:0 1px 2px rgba(0,0,0,.4); pointer-events:auto; }
.frame-corner h1, .frame-corner h2, .frame-corner h3, .frame-corner p { margin:0; font:inherit; letter-spacing:inherit; text-transform:inherit; }
.frame-corner .frame-label { opacity:.55; font-weight:600; }
.frame-corner .frame-row { display:flex; justify-content:space-between; gap:12px; }
.frame-corner .frame-row + .frame-row { margin-top:2px; }
.frame-corner .value-strong { color:var(--frame-fg-strong); opacity:.85; }
.frame-divider { height:1px; background:var(--frame-keyline); margin:4px 0; }
.frame-actions { display:flex; gap:4px; flex-wrap:wrap; }
.frame-actions button { font-size:.48rem; letter-spacing:.18em; padding:.38rem .55rem; background:transparent; border:1px solid var(--frame-keyline); color:var(--frame-fg); border-radius:6px; line-height:1; }
.frame-actions button:hover { border-color:var(--frame-accent); color:var(--frame-accent); background:var(--color-accent-fade); }
.frame-corner.tl { top:var(--frame-gap); left:var(--frame-gap); }
.frame-corner.tr { top:var(--frame-gap); right:var(--frame-gap); align-items:flex-end; text-align:right; }
.frame-corner.bl { bottom:var(--frame-gap); left:var(--frame-gap); }
.frame-corner.br { bottom:var(--frame-gap); right:var(--frame-gap); align-items:flex-end; text-align:right; }
@media (max-width:980px){
  .frame-corner { font-size:9px; letter-spacing:.18em; padding:8px 10px; }
  .frame-corner.tl, .frame-corner.tr, .frame-corner.bl, .frame-corner.br { top:auto; bottom:auto; }
  .frame-corner.tl { top:var(--frame-gap-sm); left:var(--frame-gap-sm); }
  .frame-corner.tr { top:var(--frame-gap-sm); right:var(--frame-gap-sm); }
  .frame-corner.bl { bottom:var(--frame-gap-sm); left:var(--frame-gap-sm); }
  .frame-corner.br { bottom:var(--frame-gap-sm); right:var(--frame-gap-sm); }
}

/* Help overlay */
.frame-help { position:fixed; inset:0; z-index:140; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.72); -webkit-backdrop-filter:blur(6px); backdrop-filter:blur(6px); }
.frame-help.open { display:flex; }
.frame-help .inner { max-width:740px; padding:2rem 2.4rem 2.6rem; border:1px solid var(--frame-keyline); background:var(--color-bg-alt); border-radius:18px; box-shadow:0 8px 42px -12px rgba(0,0,0,.6); font:400 .72rem/1.5 system-ui,sans-serif; letter-spacing:.01em; }
.frame-help h2 { font:600 .8rem/1.2 system-ui,sans-serif; letter-spacing:.08em; text-transform:uppercase; margin:0 0 .9rem; }
.frame-help kbd { display:inline-block; padding:.25rem .55rem; background:var(--color-bg); border:1px solid var(--color-border); border-radius:6px; font:600 .55rem/1 var(--font-mono); letter-spacing:.12em; margin-right:.35rem; }

/* Reduced motion respect */
@media (prefers-reduced-motion: reduce){
  .frame-corner, .frame-help { animation:none !important; transition:none !important; }
}

/* Focus styles */
.frame-actions button:focus-visible, .frame-corner button:focus-visible { outline:2px solid var(--frame-accent); outline-offset:1px; }

/* Interior scroll container compensating for corners */
.frame-content { padding:calc(var(--frame-gap) + 96px) calc(var(--frame-gap) + 40px) 160px; max-width:1100px; margin:0 auto; }

/* Utilities for microtype / layout (avoid inline styles) */
.stack-tight { display:flex; flex-direction:column; gap:.35rem; }
.g-12 { gap:12px; }
.row-flex-end { align-items:flex-end; gap:8px; margin-top:8px; flex-wrap:wrap; }
.inline-flex-wrap { display:flex; gap:.5rem; align-items:center; flex-wrap:wrap; }
.h1-micro { margin:0; font:600 .75rem/1 var(--font-mono); letter-spacing:.22em; color:var(--color-text-dim); text-transform:uppercase; }
.subtle-intro { margin:0; font:400 .7rem/1.35 system-ui,sans-serif; color:var(--color-text-faint); letter-spacing:.01em; }
.status-text { font:500 .55rem/1.2 var(--font-mono); letter-spacing:.12em; color:var(--color-text-faint); min-width:60px; }
.footer-meta { font:500 .55rem/1.4 var(--font-mono); letter-spacing:.14em; color:var(--color-text-faint); text-transform:uppercase; }
.mb-1 { margin-bottom:1rem; }

/* Old compositor HUD styles removed - using new perimeter system */

/* CTA link (compositor) */
.cta-link { position:fixed; left:1rem; bottom:1rem; padding:.55rem .9rem; background:rgba(15,23,42,.72); color:#fff; font:500 .72rem/1 system-ui,sans-serif; letter-spacing:.06em; text-decoration:none; border:1px solid rgba(255,255,255,.14); border-radius:8px; -webkit-backdrop-filter:blur(8px); backdrop-filter:blur(8px); z-index:130; }
.cta-link:hover { background:rgba(30,41,59,.9); }
@media (max-width:900px){ .frame-content { padding:140px 18px 120px; } }
